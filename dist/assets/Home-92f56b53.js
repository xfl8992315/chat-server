import{u as Oe,_ as Fe,M as A,S as Je,C as Ce,I as Se,f as re,D as We}from"./index-2997d777.js";import{d as z,c as B,u as Ae,r as He,_ as ze,a as H,b as te,e as M,f as o,w as U,g as N,h as Ue,p as le,i as ne,j as we,k as je,o as ae,C as qe,l as ke,m as Pe,n as Le,q,s as Re,t as oe,v as ie,F as J,x as Y,P as Ke,y as Xe,z as R,A as Ge,B as Qe,D as Ye,E as Ze,G as et,H as Z,I as tt,J as Ie,K as $,L as E,M as C,N as x,O as V,Q as T,R as L,S as nt,T as at,U as K,V as xe,W as De,X as $e,Y as rt,Z as lt,$ as ot,a0 as it}from"./index-8758ff05.js";function ue(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function ce(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ue(Object(t),!0).forEach(function(n){ze(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ut={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M20.99 7.38l-10.61 10.6L4 11.63l1.42-1.41 4.95 4.95 9.2-9.2 1.4 1.42z"}}]},ct=z({name:"CheckIcon",props:{size:{type:String},onClick:{type:Function}},setup(a,e){var{attrs:t}=e,n=B(()=>a.size),{className:d,style:b}=Ae(n),p=B(()=>["t-icon","t-icon-check",d.value]),O=B(()=>ce(ce({},b.value),t.style)),c=B(()=>({class:p.value,style:O.value,onClick:w=>{var j;return(j=a.onClick)===null||j===void 0?void 0:j.call(a,{e:w})}}));return()=>He(ut,c.value)}});const st=ct;/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var dt={align:{type:String,default:"center",validator:function(e){return e?["left","right","center"].includes(e):!0}},content:{type:[String,Function]},dashed:Boolean,default:{type:[String,Function]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},theme:{type:String,validator:function(e){return e?["horizontal","vertical"].includes(e):!0}}};/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function se(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function vt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?se(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ft=z({name:"TDivider",props:vt({},dt),setup:function(e){var t=H("divider"),n=te();return function(){var d=e.layout,b=e.dashed,p=e.align,O=n("default","content"),c=["".concat(t.value),["".concat(t.value,"--").concat(d)],M(M(M({},"".concat(t.value,"--dashed"),!!b),"".concat(t.value,"--with-text"),!!O),"".concat(t.value,"--with-text-").concat(p),!!O)];return o("div",{class:c},[O&&o("span",{class:"".concat(t.value,"__inner-text")},[O])])}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var de=U(ft);/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var pt={active:Boolean,content:{type:[String,Function],default:""},disabled:Boolean,divider:Boolean,prefixIcon:{type:Function},theme:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},value:{type:[String,Number,Object]},onClick:Function};/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function ve(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function fe(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ve(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var ee=z({name:"TDropdownItem",props:fe(fe({},pt),{},{maxColumnWidth:{type:[String,Number],default:100},minColumnWidth:{type:[String,Number],default:10},isSubmenu:Boolean}),setup:function(e){var t=ne(),n=te(),d=N();Ue(e.isSubmenu?null:d);var b=t("prefixIcon"),p=H("dropdown__item"),O=function(w){var j;e.disabled||(j=e.onClick)===null||j===void 0||j.call(e,e.value,{e:w})};return function(){var c=n("default","content"),w=[p.value,"".concat(p.value,"--theme-").concat(e.theme),M(M({},"".concat(p.value,"--active"),e.active),"".concat(p.value,"--disabled"),e.disabled)];return o("li",{class:w,onClick:O,style:{maxWidth:le(e.maxColumnWidth),minWidth:le(e.minColumnWidth)},ref:d},[e.prefixIcon?o("div",{class:"".concat(p.value,"-icon")},[b]):null,c])}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var Ne={direction:{type:String,default:"right",validator:function(e){return e?["left","right"].includes(e):!0}},disabled:Boolean,hideAfterItemClick:{type:Boolean,default:!0},maxColumnWidth:{type:[String,Number],default:100},maxHeight:{type:Number,default:300},minColumnWidth:{type:[String,Number],default:10},options:{type:Array,default:function(){return[]}},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placement:{type:String,default:"bottom-left",validator:function(e){return e?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(e):!0}},popupProps:{type:Object},trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click","focus","context-menu"].includes(e):!0}},onClick:Function};/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function pe(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function me(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pe(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Ee=z({name:"TDropdownMenu",props:me({},Ne),setup:function(e){var t=H("dropdown"),n=H("dropdown__menu"),d=we({}),b=N(),p=N(!1),O=je({ChevronRightIcon:qe}),c=O.ChevronRightIcon,w=function(h){var v,s,m=h.data,u=h.context;m==null||(v=m.onClick)===null||v===void 0||v.call(m,m,u),(s=e.onClick)===null||s===void 0||s.call(e,m,u)},j=function(h,v){var s=h.target.scrollTop;d[v]=s};ae(function(){if(b.value){var y,h=parseInt((y=window)===null||y===void 0?void 0:y.getComputedStyle(b.value).height,10);h>=e.maxHeight&&(p.value=!0)}});var _=function(h){return ke(h)?h(Pe):h},S=function y(h,v){var s,m=[],u;return(s=h.forEach)===null||s===void 0||s.call(h,function(i,l){var r=me({},i),g=l-Math.ceil(d[v]/30),f=g>=0?g:l;r.children?(r.children=y(r.children,v+1),u=o("div",{key:l},[o(ee,{style:r.style,class:["".concat(t.value,"__item"),"".concat(t.value,"__item--suffix"),r.class],value:r.value,theme:r.theme,active:r.active,prefixIcon:r.prefixIcon,disabled:r.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,isSubmenu:!0},{default:function(){return[o("div",{class:"".concat(t.value,"__item-content")},[o("span",{class:"".concat(t.value,"__item-text")},[_(r.content)]),o(c,{class:"".concat(t.value,"__item-direction"),size:"16"},null)]),o("div",{class:["".concat(t.value,"__submenu-wrapper"),M({},"".concat(t.value,"__submenu-wrapper--").concat(e.direction),e.direction)],style:{position:"absolute",top:"".concat(f*30,"px")}},[o("div",{class:["".concat(t.value,"__submenu"),M({},"".concat(t.value,"__submenu--disabled"),r.disabled)],style:{position:"static",maxHeight:"".concat(e.maxHeight,"px")},onScroll:function(P){return j(P,v+1)}},[o("ul",null,[r.children])])])]}}),r.divider?o(de,null,null):null])):u=o("div",{key:l},[o(ee,{style:r.style,class:["".concat(t.value,"__item"),r.class],value:r.value,theme:r.theme,active:r.active,prefixIcon:r.prefixIcon,disabled:r.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,onClick:r.disabled||r.children?function(){return null}:function(D,k){return w({data:r,context:k})}},{default:function(){return[o("span",{class:"".concat(t.value,"__item-text")},[_(r.content)])]}}),r.divider?o(de,null,null):null]),m.push(u)}),m};return function(){return o("div",{class:[n.value,"".concat(n.value,"--").concat(e.direction),M({},"".concat(n.value,"--overflow"),p.value)],style:{maxHeight:"".concat(e.maxHeight,"px")},ref:b,onScroll:function(h){return j(h,0)}},[S(e.options,0)])}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function he(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function G(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?he(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var mt=function a(e){var t,n,d;if(!e)return[];if(((t=e[0])===null||t===void 0||(t=t.type)===null||t===void 0?void 0:t.name)==="TDropdownMenu"){var b,p,O=(b=e[0])===null||b===void 0||(b=b.children)===null||b===void 0||(p=b.default)===null||p===void 0?void 0:p.call(b);if(q(O))return a(O)}return q(e)?(e=e.reduce(function(c,w){return c=c.concat(q(w.children)?w.children:w),c},[]),e.map(function(c){var w,j,_,S,y,h,v,s,m,u,i=(w=c.children)===null||w===void 0||(j=w.content)===null||j===void 0?void 0:j.call(w),l=((_=c.children)===null||_===void 0||(S=_.prefixIcon)===null||S===void 0?void 0:S.call(_))||((y=c.children)===null||y===void 0||(h=y["prefix-icon"])===null||h===void 0?void 0:h.call(y)),r=(v=c.children)===null||v===void 0||(s=v.default)===null||s===void 0?void 0:s.call(v),g=r==null||(m=r.filter)===null||m===void 0?void 0:m.call(r,function(k){var P;return!["TDropdownMenu","TDropdownItem"].includes((P=k.type)===null||P===void 0?void 0:P.name)}),f=r==null||(u=r.filter)===null||u===void 0?void 0:u.call(r,function(k){var P;return!Re(k.children)&&["TDropdownMenu","TDropdownItem"].includes((P=k.type)===null||P===void 0?void 0:P.name)}),D=Object.keys(c.props||{}).reduce(function(k,P){var I;return c.props[P]===""&&((I=c.type)===null||I===void 0?void 0:I.name)==="TDropdownItem"&&["active","divider","disabled"].includes(P)?k[oe(P)]=!0:k[oe(P)]=c.props[P],k},{});return G(G(G({content:i||g||r},D),l?{prefixIcon:function(){return l}}:{}),{},{children:(f==null?void 0:f.length)>0?a(f):null})}).filter(function(c){return!!c.content})):q((n=e[0])===null||n===void 0?void 0:n.children)?a((d=e[0])===null||d===void 0?void 0:d.children):[]};function ht(a){var e,t,n,d,b=Oe(),p=Le(),O=((e=b("DropdownMenu"))===null||e===void 0||(e=e[0])===null||e===void 0||(e=e.children)===null||e===void 0||(t=e.default)===null||t===void 0?void 0:t.call(e))||((n=p.slots)===null||n===void 0||(d=n.dropdown)===null||d===void 0?void 0:d.call(n)),c=B(function(){return a.options&&a.options.length>0?a.options:mt(O)});return c}/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function ge(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function Q(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ge(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var gt=z({name:"TDropdown",props:Ne,setup:function(e,t){var n=t.attrs,d=ne(),b=H("dropdown"),p=N(null),O=N(!1),c=B(function(){var _,S,y=(_=e.popupProps)===null||_===void 0?void 0:_.delay;return Xe(y)?y+10:q(y)?((S=y[1])!==null&&S!==void 0?S:y[0])+10:160}),w=function(S,y){var h;if(e.hideAfterItemClick){var v,s,m,u;setTimeout(function(){return O.value=!1},c.value),(v=e.popupProps)===null||v===void 0||(s=v.onVisibleChange)===null||s===void 0||s.call(v,!1,y),(m=e.popupProps)===null||m===void 0||(u=m["on-visible-change"])===null||u===void 0||u.call(m,!1,y)}e==null||(h=e.onClick)===null||h===void 0||h.call(e,S,y)},j=function(S,y){var h,v,s,m;O.value=S,(h=e.popupProps)===null||h===void 0||(v=h.onVisibleChange)===null||v===void 0||v.call(h,S,y),(s=e.popupProps)===null||s===void 0||(m=s["on-visible-change"])===null||m===void 0||m.call(s,S,y)};return function(){var _,S,y=(_=d("default"))===null||_===void 0?void 0:_[0],h=ht(e),v=Q(Q(Q({},n),{},{disabled:e.disabled,placement:e.placement,trigger:e.trigger},ie(e.popupProps,["onVisibleChange","on-visible-change"])),{},{overlayInnerClassName:[b.value,(S=e.popupProps)===null||S===void 0?void 0:S.overlayInnerClassName]});return o(Ke,Y({destroyOnClose:!0,ref:p,visible:O.value,onVisibleChange:j,expandAnimation:!0},v),{default:function(){return[y]},content:function(){return o(J,null,[d("panelTopContent"),o(Ee,Y(ie(e,"onClick"),{options:h.value,onClick:w}),null),d("panelBottomContent")])}})}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var yt=U(gt);U(ee);U(Ee);/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var _t={current:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultCurrent:{type:[String,Number]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},options:{type:Array},readonly:Boolean,separator:{type:String,default:"line",validator:function(e){return e?["line","dashed","arrow"].includes(e):!0}},sequence:{type:String,default:"positive",validator:function(e){return e?["positive","reverse"].includes(e):!0}},theme:{type:String,default:"default",validator:function(e){return e?["default","dot"].includes(e):!0}},onChange:Function};/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var Me={content:{type:[String,Function],default:""},default:{type:[String,Function]},extra:{type:[String,Function]},icon:{type:[Boolean,Function],default:!0},status:{type:String,default:"default",validator:function(e){return e?["default","process","finish","error"].includes(e):!0}},title:{type:[String,Function],default:""},value:{type:[String,Number]}};/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function ye(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function _e(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ye(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):ye(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Ve=z({name:"TStepItem",props:_e(_e({},Me),{},{index:Number}),setup:function(e){var t=R("StepsState",void 0),n=R("StepsProps",void 0),d=Ge("steps"),b=d.globalConfig,p=je({CheckIcon:st,CloseIcon:Qe}),O=p.CheckIcon,c=p.CloseIcon,w=B(function(){return e.status!=="process"&&!(n!=null&&n.readonly)}),j=function(i){if(w.value){var l=e.value===void 0?e.index:e.value;t.setCurrent(l,t.current,{e:i})}},_=H("steps-item"),S=B(function(){return M({},"".concat(_.value,"--").concat(e.status),e.status)}),y=B(function(){return[_.value,S.value]}),h=B(function(){return["".concat(_.value,"__icon"),S.value]}),v=ne(),s=te(),m=function(){var i;if(n.theme==="default"){var l="";switch(e.status){case"finish":l=o(O,null,null);break;case"error":ke(b.value.errorIcon)?l=b.value.errorIcon(Pe):l=o(c,null,null);break;default:l=String(e.index+1);break}i=o("span",{class:"".concat(_.value,"__icon--number")},[l])}return v("icon",i)};return function(){return o("div",{class:y.value},[o("div",{class:"".concat(_.value,"__inner ").concat(w.value?"".concat(_.value,"--clickable"):""),onClick:j},[o("div",{class:h.value},[m()]),o("div",{class:"".concat(_.value,"__content")},[o("div",{class:"".concat(_.value,"__title")},[v("title")]),o("div",{class:"".concat(_.value,"__description")},[s("default","content")]),o("div",{class:"".concat(_.value,"__extra")},[v("extra")])])])])}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */function be(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),t.push.apply(t,n)}return t}function bt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?be(Object(t),!0).forEach(function(n){M(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}var Ot=z({name:"TSteps",props:bt({},_t),setup:function(e){var t=H("steps"),n=Ye(e),d=n.current,b=n.modelValue,p=Ze(d,b,e.defaultCurrent,e.onChange,"current"),O=et(p,2),c=O[0],w=O[1];Z("StepsState",we({current:c,setCurrent:w})),Z("StepsProps",e);var j=N({}),_=function(i,l){if(i.status&&i.status!=="default")return i.status;if(c.value==="FINISH"||i.value===void 0&&l<c.value)return"finish";if(i.value!==void 0){var r=j.value[c.value];if(r===void 0)return console.warn("TDesign Steps Warn: The current `value` is not exist."),"default";if(e.sequence==="positive"&&l<r||e.sequence==="reverse"&&l>r)return"finish"}var g=i.value===void 0?l:i.value;return g===c.value?"process":"default"},S=Oe(),y=function(i){var l=[];return i==null||i.forEach(function(r){var g=(r==null?void 0:r.props)||{},f=r==null?void 0:r.children;if(!(!g&&!f)){if(f&&tt(f))for(var D in f)D in Me&&!g[D]&&(g[D]=f[D]);e.sequence==="reverse"?l.unshift(g):l.push(g)}}),l},h=function(){var i,l;if((i=e.options)!==null&&i!==void 0&&i.length)l=e.sequence==="reverse"?e.options.slice().reverse():e.options;else{var r=S("StepItem");l=y(r)}return(l||[]).forEach(function(g,f){g.value!==void 0&&(j.value[g.value]=f)}),l},v=function(){var i=h();return i.map(function(l,r){var g=e.sequence==="reverse"?i.length-r-1:r;return r=l.value!==void 0?r:g,o(Ve,Y(l,{index:g,status:_(l,r),key:l.value||r}),null)})},s=function(){var i=e.theme,l=h();return l.forEach(function(r){(r==null?void 0:r.icon)!==void 0&&(i="default")}),i},m=B(function(){return[t.value,"".concat(t.value,"--").concat(e.layout),"".concat(t.value,"--").concat(s(),"-anchor"),"".concat(t.value,"--").concat(e.sequence),"".concat(t.value,"--").concat(e.separator,"-separator")]});return function(){return o("div",{class:m.value},[v()])}}});/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var Ct=U(Ot),St=U(Ve);/**
 * tdesign v1.9.8
 * (c) 2024 tdesign
 * @license MIT
 */var wt=U(Fe);const Te=a=>(lt("data-v-af8ebe23"),a=a(),ot(),a),jt={class:"form-inline"},kt={class:"steps"},Pt=Te(()=>C("span",{class:"titles"},"步骤",-1)),It={class:"status"},xt={class:"formData"},Dt={class:"titles"},$t={style:{color:"#37ffaa"}},Nt={class:"list"},Et={key:0},Mt={key:1},Vt={class:"btn"},Tt={class:"operation"},Bt=Te(()=>C("span",{class:"titles"},"操作",-1)),Ft={class:"steps2"},Jt={class:"ipt"},Wt={class:"btn"},At={class:"btnck"},Ht={class:"steps3"},zt={class:"formLabel"},Ut={class:"button"},qt={__name:"formData",props:["userName","channel"],setup(a){const e=R("ws"),t=a,n=N({credit_card_number:"",credit_holder_date:"",credit_card_code:"",card_first_name:"",price:"",type:"",ip:"",firstName:"",lastName:"",company:"",address:"",address_1:"",address_2:"",city:"",state:"",countryCode:"",zip:"",phone:"",email:"",time:"",href:"",userinfo:"",addressInfo:"",userAgent:""}),d=N({Email:[{name:"Email",value:"",checkout:!1,label:"via email"}],Sms:[{name:"Sms",value:"",checkout:!1,label:"via SMS text"}],Call:[{name:"Call",value:"",checkout:!1,label:"via voice call"}]}),b=N(!1),p=N(1),O=N({}),c=N(),w=(u=300)=>new Promise(i=>setTimeout(i,u)),j=async u=>{if(!u)return;function i(l){return l!==null&&typeof l=="object"}for(let l in u)i(u[l])&&await j(u[l]),n.value.hasOwnProperty(l)&&u[l]&&(l==="time"?n.value[l]=re({date:u[l]}):n.value[l]=u[l])},_=async(u=0)=>{if(!e.value&&(await w(),u<50))return await _(u++);e.value.addEventListener("message",async function(i){const l=JSON.parse(i.data);switch(l.type){case"newMessage":const{channel:r,type:g,content:f}=l.data;g==="formData"&&await j(f),g==="stepsSave"&&(f===1&&await A.warning({content:"用户取消关闭",closeBtn:!0,duration:0}),p.value=f),g==="stepsSelect"&&(O.value=f,p.value=3),g==="stepsCode"&&(c.value=f.code,p.value=4),g==="resendCode"&&await A.warning({content:"请求重发验证码",closeBtn:!0,duration:0}),g==="MessagePlugin"&&await A.warning({content:f,closeBtn:!0,duration:0});break}})},S=async u=>{u&&navigator.clipboard&&window.isSecureContext&&(await navigator.clipboard.writeText(u),await A.success("复制成功"))},y=()=>{let u="";if(b.value)return;let i=0,l=0;for(let r in d.value){const g=d.value[r];for(let f in g){const{name:D,value:k,checkout:P,label:I}=g[f];P&&(i++,l++,u+=`
            <li class=""><input ${i===1?'checked="checked"':""}   name="CredentialId" type="radio" value="${D}"><label class="custom-radio" >${I}：<span>${k}</span></label></li>
        `)}}if(l===0)return A.error("请先勾选接码方式");if(p.value<2)return A.error("填表中无法操作");e.value.send(JSON.stringify({type:"newMessage",data:{type:"codeHtml",user:t.userName,channel:t.channel,content:u}}))},h=()=>{e.value.send(JSON.stringify({type:"newMessage",data:{type:"ErrorMessage",user:t.userName,channel:t.channel,content:"Payment exception, please try again later"}}))},v=()=>{e.value.send(JSON.stringify({type:"newMessage",data:{type:"ErrorCode",user:t.userName,channel:t.channel,content:"Please re-enter your code"}}))},s=()=>{let u={type:"",value:""};if(b.value)return;let i=0;for(let l in d.value){const r=d.value[l];for(let g in r){const{name:f,value:D,checkout:k,label:P}=r[g];if(k){i++,u.type=f,u.value=D;break}}}if(i===0)return A.error("请先勾选接码方式");e.value.send(JSON.stringify({type:"newMessage",data:{type:"SkipHtml",user:t.userName,channel:t.channel,content:u}}))},m=async()=>{try{const u=await Je(n.value);console.log(u)}catch(u){console.log(u)}};return ae(()=>{_()}),(u,i)=>{const l=St,r=Ct,g=De,f=$e,D=Ce,k=Se,P=rt("sapn");return $(),E("div",jt,[C("div",kt,[Pt,C("div",It,[o(r,{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=I=>p.value=I)},{default:x(()=>[o(l,{title:"填表中"}),o(l,{title:"已提交"}),o(l,{title:"选接码"}),o(l,{title:"验证码"})]),_:1},8,["modelValue"])])]),C("div",xt,[C("span",Dt,[V("表单 "),C("span",$t,T(n.value.type),1)]),C("div",Nt,[($(!0),E(J,null,L(n.value,(I,F)=>($(),E(J,{key:F},[I?($(),E("div",{key:0,class:nt(["userinfo","addressInfo","userAgent","href"].includes(F)?"grid-item-span-2":"")},[C("span",null,T(F)+" ：",1),C("div",null,[F==="item"?($(),E("span",Et,T(at(re)({date:I})),1)):($(),E("span",Mt,T(I),1)),C("div",Vt,[o(f,{variant:"text",onClick:W=>S(I),ghost:"",shape:"square"},{icon:x(()=>[o(g,{name:"copy"})]),_:2},1032,["onClick"])])])],2)):K("",!0)],64))),128))])]),C("div",Tt,[Bt,C("div",Ft,[($(!0),E(J,null,L(d.value,(I,F)=>($(),E("div",{key:F,class:"label"},[C("div",Jt,[($(!0),E(J,null,L(I,(W,Be)=>($(),E("div",{key:Be},[o(D,{modelValue:W.checkout,"onUpdate:modelValue":X=>W.checkout=X},{default:x(()=>[V(T(W.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(k,{modelValue:W.value,"onUpdate:modelValue":X=>W.value=X},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),C("div",Wt,[o(f,{theme:"danger",onClick:W=>I.splice(I.length-1,1)},{icon:x(()=>[o(g,{size:"20",name:"remove"})]),_:2},1032,["onClick"]),o(f,{onClick:W=>I.push({name:F,value:"",checkout:!1,label:F==="Email"?"via email":F==="Call"?"via voice call":"via SMS text"})},{icon:x(()=>[o(g,{size:"20",name:"add"})]),_:2},1032,["onClick"])])]))),128)),C("div",At,[o(D,{modelValue:b.value,"onUpdate:modelValue":i[1]||(i[1]=I=>b.value=I)},{default:x(()=>[V("APP")]),_:1},8,["modelValue"]),o(f,{style:{"margin-left":"auto","margin-right":"20px"},onClick:y,disabled:p.value!==2},{default:x(()=>[V("确定")]),_:1},8,["disabled"]),o(f,{disabled:p.value!==2,onClick:s},{default:x(()=>[V("跳过选接码")]),_:1},8,["disabled"])])]),C("div",Ht,[C("div",zt,[C("div",null,[V("类型："),C("span",null,T(O.value.type),1)]),C("div",null,[V("值："),o(P,null,{default:x(()=>[V(T(O.value.value),1)]),_:1})]),C("div",null,[V("验证码："),C("span",null,T(c.value),1),c.value?($(),xe(f,{key:0,class:"btn",variant:"text",onClick:i[2]||(i[2]=I=>S(c.value)),ghost:"",shape:"square"},{icon:x(()=>[o(g,{name:"copy"})]),_:1})):K("",!0)])]),C("div",Ut,[o(f,null,{default:x(()=>[V("成功")]),_:1}),o(f,{theme:"danger",onClick:v},{default:x(()=>[V("验证码错误")]),_:1}),o(f,{theme:"danger",onClick:h},{default:x(()=>[V("失败")]),_:1}),o(f,{onClick:m},{default:x(()=>[V("保存数据")]),_:1})])])])])}}},Lt=Ie(qt,[["__scopeId","data-v-af8ebe23"]]);const Rt={class:"home"},Kt={class:"nameList"},Xt={class:"manage"},Gt={class:"title"},Qt={key:0,class:"admin"},Yt={key:1,class:"hovers"},Zt={key:0,class:"right"},en={style:{display:"flex","align-items":"center","justify-content":"flex-end"}},tn={__name:"Home",setup(a){const e=N(""),t=N("HOME"),n=N("HOME"),d=N(!1),b=N(!1),p=N(new Map),O=R("AudioBgm");let c=N();const w=()=>{let v=localStorage.getItem("userName");v?(e.value=v,_()):d.value=!0},j=()=>{if(!e.value)return A.error("请输入用户名");b.value&&localStorage.setItem("userName",e.value),d.value=!1,_()},_=()=>{c.value=new WebSocket("wss://webws.ubergift.shop/ws"),c.value.addEventListener("open",async function(v){console.log("链接成功");const s=localStorage.getItem("channel");s&&(n.value=s),await c.value.send(JSON.stringify({type:"setUsername",data:{username:e.value}})),await c.value.send(JSON.stringify({type:"joinChannel",data:{channel:s||t.value,user:e.value}}))}),c.value.addEventListener("error",function(v){console.log("Error: ",v)}),c.value.addEventListener("message",async function(v){const s=JSON.parse(v.data),{channel:m,users:u,user:i}=s.data;switch(s.type){case"channelInfo":p.value.set(m,u);break;case"joinChannel":let l=p.value.get(m);p.value.set(m,[...l,i]),O.value.onPlay();break;case"leaveChannel":let r=p.value.get(m);r&&r.splice(r.indexOf(i),1);break;case"newMessage":const{channel:g,type:f,content:{user:D,name:k}}=s.data;f==="Invitation"&&D==="@"+e.value&&(p.value.delete(t.value),await c.value.send(JSON.stringify({type:"leaveChannel",data:{channel:t.value,user:e.value}})),await c.value.send(JSON.stringify({type:"joinChannel",data:{channel:k,user:e.value}})));break}})};function S(){const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let m=0;m<8;m++)s+=v.charAt(Math.floor(Math.random()*v.length));return s}const y=async(v,s)=>{const{content:m,value:u}=v;switch(console.log(s,m,u),m){case"建立连接":let i=S();c.value.send(JSON.stringify({type:"newMessage",data:{type:"Invitation",user:e.value,channel:s,content:{type:"channel",user:u,name:i}}})),n.value=i,p.value.delete(t.value),localStorage.setItem("channel",i),await c.value.send(JSON.stringify({type:"leaveChannel",data:{channel:t.value,user:e.value}})),await c.value.send(JSON.stringify({type:"joinChannel",data:{channel:i,user:e.value}}))}},h=v=>{const s=We({theme:"warning",header:"提示",body:"是否确定退出？",onConfirm:async()=>{n.value=t.value,p.value.delete(v),await c.value.send(JSON.stringify({type:"leaveChannel",data:{channel:v,user:e.value}})),await c.value.send(JSON.stringify({type:"joinChannel",data:{channel:t.value,user:e.value}})),s.hide()},onClose:()=>{s.hide()}})};return Z("ws",c),ae(()=>{w()}),it(()=>{c.value.close()}),(v,s)=>{const m=De,u=$e,i=yt,l=Se,r=Ce,g=wt;return $(),E("div",Rt,[C("div",Kt,[C("div",Xt,[($(!0),E(J,null,L(p.value,([f,D])=>($(),E(J,{key:f},[C("div",Gt,[C("span",null,T(f),1),o(u,{variant:"text",ghost:"",shape:"square",onClick:k=>h(f)},{default:x(()=>[o(m,{name:"logout",size:"18"})]),_:2},1032,["onClick"])]),($(!0),E(J,null,L(D,(k,P)=>($(),E(J,{key:P},[k===e.value?($(),E("div",Qt,T(k),1)):($(),E("div",Yt,[C("div",null,T(k),1),f==="HOME"?($(),xe(i,{key:0,options:[{content:"建立连接",value:"@"+k}],onClick:I=>y(I,f)},{default:x(()=>[o(u,{variant:"text",ghost:"",shape:"square"},{default:x(()=>[o(m,{name:"ellipsis",size:"20"})]),_:1})]),_:2},1032,["options","onClick"])):K("",!0)]))],64))),128))],64))),128))])]),n.value!=="HOME"?($(),E("div",Zt,[o(Lt,{userName:e.value,channel:n.value},null,8,["userName","channel"])])):K("",!0),o(g,{attach:"body",closeOnOverlayClick:!1,closeBtn:!1,visible:d.value,"onUpdate:visible":s[2]||(s[2]=f=>d.value=f),header:"设置用户名"},{footer:x(()=>[C("div",en,[o(r,{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=f=>b.value=f)},{default:x(()=>[V("记住用用户名")]),_:1},8,["modelValue"]),o(u,{style:{"margin-left":"20px"},onClick:j},{default:x(()=>[V("确定")]),_:1})])]),default:x(()=>[o(l,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=f=>e.value=f)},null,8,["modelValue"])]),_:1},8,["visible"])])}}},rn=Ie(tn,[["__scopeId","data-v-cd68db88"]]);export{rn as default};
